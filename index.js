(function(){"use strict";function r(e,t,s,a,l,n,m,f){var i=typeof e=="function"?e.options:e;return t&&(i.render=t,i.staticRenderFns=s,i._compiled=!0),{exports:e,options:i}}const o={extends:"k-field",props:{value:{type:[String,Object,null],default:null},empty:{type:String,default:"No event added yet"},drawerTitle:{type:String,default:"Event Details"},venue:{type:Boolean,default:!0},url:{type:Boolean,default:!0},details:{type:Boolean,default:!0},time:{type:Boolean,default:!0},labels:{type:Object,default:()=>({startDate:"Start Date",endDate:"End Date",city:"City",state:"State/Region",country:"Country",venue:"Venue",url:"URL",details:"Details"})}},data(){return{drawer:!1,saving:!1,form:{startDate:"",endDate:"",city:"",state:"",country:"",venue:"",url:"",details:""}}},created(){this.$watch(()=>this.value,e=>{const t={startDate:"",endDate:"",city:"",state:"",country:"",venue:"",url:"",details:""};this.form=e&&typeof e=="object"?{...t,...e}:{...t}},{immediate:!0})},computed:{emptyComputed(){return this.empty||"No event"},hasContent(){const e=this.value&&typeof this.value=="object"?this.value:{};return[e.startDate,e.endDate,e.city,e.state,e.country,this.venue?e.venue:"",this.url?e.url:"",this.details?e.details:""].some(s=>!!s&&String(s).trim()!=="")},summaryOrder(){return["startDate","endDate","city","state","country",...this.venue?["venue"]:[],...this.url?["url"]:[],...this.details?["details"]:[]]},summaryRows(){const e=this.value&&typeof this.value=="object"?this.value:{},t=[];for(const s of this.summaryOrder){let a=e[s]??"";(s==="startDate"||s==="endDate")&&(a=this.formatDate(a));const l=!a||String(a).trim()==="";if(!this.showEmpty&&l)continue;const n={key:s,label:this.labels[s]||s,value:a};t.push(n)}return t}},methods:{openDrawer(){const e={startDate:{type:"date",label:this.labels.startDate,time:this.time,width:"1/2"},endDate:{type:"date",label:this.labels.endDate,time:this.time,width:"1/2"},city:{type:"text",label:this.labels.city,width:"1/2"},state:{type:"text",label:this.labels.state,width:"1/2"},country:{type:"text",label:this.labels.country}};this.venue&&(e.venue={type:"text",label:this.labels.venue}),this.url&&(e.url={type:"url",label:this.labels.url}),this.details&&(e.details={type:"textarea",label:this.labels.details,buttons:!1,size:"medium"}),this.$panel.drawer.open({component:"k-form-drawer",props:{icon:"calendar",title:this.drawerTitle,fields:e,value:{...this.form}},on:{submit:this.handleSubmit.bind(this)}})},closeDrawer(){this.$panel.drawer.close()},handleSubmit(e){Promise.resolve().then(()=>{this.form={...this.form,...e||{}},this.$emit("input",this.form),this.$emit("change",this.form),this.closeDrawer(),this.$panel.notification.success({message:"Ok",timeout:4e3})}).catch(()=>{this.$panel.notification.error({message:"An error occurred",timeout:4e3})})},formatDate(e){if(!e)return"";const t=String(e);return this.time?t:t.split(/[ T]/)[0]}}};var u=function(){var t=this,s=t._self._c;return s("k-field",t._b({staticClass:"k-event-field"},"k-field",t.$props,!1),[s("k-button",{attrs:{slot:"options",icon:"edit",size:"xs",variant:"filled",disabled:t.disabled},on:{click:t.openDrawer},slot:"options"},[t._v("Edit...")]),s("div",{staticClass:"k-event-field__summary"},[t.hasContent?s("table",{staticClass:"k-table",staticStyle:{"table-layout":"auto"},on:{click:t.openDrawer}},[s("tbody",t._l(t.summaryRows,function(a){return s("tr",{key:a.key},[s("th",{attrs:{"data-mobile":"true"}},[t._v(t._s(a.label))]),s("td",{attrs:{"data-mobile":"true"}},[a.key==="url"&&a.value?[s("a",{attrs:{href:a.value,target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(a.value))])]:a.key==="details"&&a.value?[s("div",{staticClass:"k-prose",domProps:{innerHTML:t._s(a.value)}})]:[t._v(" "+t._s(a.value||"â€”")+" ")]],2)])}),0)]):s("k-empty",{attrs:{icon:"calendar"}},[t._v(t._s(t.emptyComputed))])],1)],1)},d=[],c=r(o,u,d);const h=c.exports;panel.plugin("scottboms/events",{fields:{event:h}})})();
